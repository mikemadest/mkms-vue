webpackJsonp([0],{1153:function(t,e,i){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e,i){return e&&o(t.prototype,e),i&&o(t,i),t}function a(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?c(t):e}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t,e,i){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=u(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function u(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var y=i(88),d=function(t){function e(){return r(this,e),a(this,h(e).call(this,{key:"Boot",active:!0}))}return f(e,t),s(e,[{key:"init",value:function(){this.URL=this.sys.game.URL,this.CONFIG=this.sys.game.CONFIG,this.language=this.CONFIG.language}},{key:"preload",value:function(){this.load.setPath(this.URL),this.load.bitmapFont("ClickPixel","assets/fonts/click-pixel.png","assets/fonts/click-pixel.xml"),["en","fr"].indexOf(this.language)<0&&(this.language="en"),this.load.json("textsData","assets/data/texts-"+this.language+".json"),this.load.image("titlescreen","assets/img/title-bg.png"),this.load.json("preloadData","assets/data/preload.json")}},{key:"create",value:function(){l(h(e.prototype),"create",this).call(this),this.scene.start("Preload")}}]),e}(y.a);e.a=d},1154:function(t,e,i){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),n.forEach(function(e){o(t,e,i[e])})}return t}function o(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e,i){return e&&a(t.prototype,e),i&&a(t,i),t}function l(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?u(t):e}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t,e,i){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=f(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function f(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var b=i(88),m=i(141),g=function(t){function e(){return s(this,e),l(this,p(e).call(this,{key:"Preload",active:!1}))}return y(e,t),c(e,[{key:"init",value:function(){this.URL=this.sys.game.URL,this.CONFIG=this.sys.game.CONFIG}},{key:"preload",value:function(){var t=this;this.createBackground(),this.createLoadingBar(),this.preloadData=this.cache.json.get("preloadData"),this.load.setPath(this.URL),this.preloadData.images.forEach(function(e){return t.load.image(e[0],e[1])}),this.load.tilemapTiledJSON("level1","assets/tilemap/zone1.json"),this.load.atlas("worldAnim","assets/atlas/atlas.png","assets/atlas/atlas.json",Phaser.Loader.TEXTURE_ATLAS_JSON_HASH),this.load.json("spritesData","assets/data/sprites.json"),this.load.json("stylesData","assets/data/styles.json"),this.preloadData.audio.forEach(function(e){return t.load.audio(e[0],e[1])})}},{key:"create",value:function(){var t=this;h(p(e.prototype),"create",this).call(this),this.preloadData.anims.forEach(function(e){return t.createAnims(e[0],"worldAnim",e[1])}),this.scene.start("Menu")}},{key:"createBackground",value:function(){this.bg=this.add.graphics({x:0,y:0}),this.bg.fillStyle("0x476565",1),this.bg.fillRect(0,0,this.CONFIG.width,this.CONFIG.height)}},{key:"createAnims",value:function(t,e,i){if(t){var n=r({},i,{prefix:t+"-"}),o=this.anims.generateFrameNames(e,n),s=i.speed?i.speed:5;this.anims.create({key:"spr-"+t,frames:o,frameRate:s,repeat:-1})}}},{key:"createLoadingBar",value:function(){this.title=new m.a(this,this.CONFIG.centerX,75,"Loading Game",24,.5),this.txt_progress=new m.a(this,this.CONFIG.centerX,this.CONFIG.centerY-5,"Loading...",16,{x:.5,y:1});var t=this.CONFIG.centerY+5;this.progress=this.add.graphics({x:10,y:t}),this.border=this.add.graphics({x:10,y:t}),this.load.on("progress",this.onProgress,this)}},{key:"onProgress",value:function(t){var e=this.CONFIG.width-2*this.progress.x;this.progress.clear(),this.progress.fillStyle("0xFFFFFF",1),this.progress.fillRect(0,0,e*t,36),this.border.clear(),this.border.lineStyle(4,"0x0e1a1a",1),this.border.strokeRect(0,0,e*t,36),this.txt_progress.setText(Math.round(100*t)+"%")}}]),e}(b.a);e.a=g},1155:function(t,e,i){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e,i){return e&&o(t.prototype,e),i&&o(t,i),t}function a(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?c(t):e}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=i(469),p=function(t){function e(){return r(this,e),a(this,l(e).call(this,{key:"Intro",active:!1}))}return u(e,t),s(e,[{key:"init",value:function(t){this.menuMusic=t.music,this.CONFIG=this.sys.game.CONFIG}},{key:"create",value:function(){var t=this;this.sys.game.events.on("resize",function(){return t.resizeApp(t.sys.game.CONFIG)},this),this.createBackground(),this.textsData=this.cache.json.get("textsData");this.maxWidth=.95*this.CONFIG.width/this.cameras.main.zoom-15,this.add.text(this.CONFIG.centerX,this.CONFIG.height-20,this.textsData.MY_INFO,{fill:"#fff",fontSize:"10px",fontFamily:"Arial, sans serif",wordWrap:{width:this.maxWidth,useAdvancedWrap:!0}}).setOrigin(.5),this.storySteps=[this.textsData.STORY_1,this.textsData.STORY_2,this.textsData.STORY_3],this.displayIntroText(0)}},{key:"displayIntroText",value:function(t){var e=this,i=this.add.text(this.CONFIG.centerX,100,this.storySteps[t],{fill:"#fff",fontSize:"20px",fontFamily:"Arial, sans serif",wordWrap:{width:this.maxWidth,useAdvancedWrap:!0}}).setOrigin(.5).setAlpha(0),n=t<this.storySteps.length-1?"CONTINUE":"GAME_START",r={targets:i,alpha:1,duration:1e3,ease:"Linear",delay:200};0===t?r.onComplete=function(){return e.showStartText(0,n)}:this.showStartText(0,n);var o=this.tweens.add(r);t<this.storySteps.length-1?this.waitInputToContinue(function(){e.waitInputToContinue(!1),o.stop(),i.setAlpha(0),e.displayIntroText(++t)}):this.waitInputToContinue(this.goPlay)}},{key:"goPlay",value:function(){var t=this;this.waitInputToContinue(!1),this.tweens.add({targets:this.bgImage,alpha:0,duration:1500,ease:"Cubic",easeParams:[1,1],delay:0,onComplete:function(){t.menuMusic.stop(),t.scene.start("Game")}})}}]),e}(f.a);e.a=p},1156:function(t,e,i){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),n.forEach(function(e){o(t,e,i[e])})}return t}function o(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e,i){return e&&a(t.prototype,e),i&&a(t,i),t}function l(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?u(t):e}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t,e,i){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=f(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function f(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var b=i(88),m=i(142),g=i(1157),v=i(470),w=i(1158),O=i(1159),k=i(1160),x=i.n(k),S=function(t){function e(){return s(this,e),l(this,p(e).call(this,{key:"Game",active:!1}))}return y(e,t),c(e,[{key:"init",value:function(){this.CONFIG=this.sys.game.CONFIG}},{key:"preload",value:function(){this.load.scenePlugin("AnimatedTiles",x.a,"animatedTiles","animatedTiles")}},{key:"create",value:function(){var t=this;h(p(e.prototype),"create",this).call(this),this.spritesData=this.cache.json.get("spritesData"),this.textsData=this.cache.json.get("textsData"),this.stylesData=this.cache.json.get("stylesData"),this.playerHasMagicStaff=!1,this.loadLevelElements(),this.createWorldAnimations(),this.createWorldInhabitants(),this.gameMusic=this.sound.add("ambiance"),this.gameMusic.setVolume(.1),this.gameMusic.play(),this.physics.world.setBounds(0,0,this.map.widthInPixels,this.map.heightInPixels),this.cameras.main.setBounds(0,0,this.map.widthInPixels,this.map.heightInPixels),this.cameras.main.startFollow(this.creatures.player.spr,!0,.5,.5),this.cursors=r({},this.input.keyboard.createCursorKeys(),this.input.keyboard.addKeys("Z,S,Q,D")),this.input.keyboard.on("keydown_SPACE",function(){return t.throwFireball()}),this.actionBar=this.physics.add.sprite(30,this.CONFIG.height-20,"worldAnim","fireball-4"),this.actionBar.setScale(.8,.8),this.actionBar.setDepth(10),this.actionBar.setScrollFactor(0),this.actionBar.setVisible(!1),this.actionBar.setInteractive(),this.actionBar.on("pointerup",function(){return t.throwFireball()}),this.fireballs=this.physics.add.group(),this.physics.add.collider(this.fireballs,this.layers.details,function(e){return t.explodeOnContact(e)}),this.physics.add.collider(this.fireballs,this.layers.world,function(e){return t.explodeOnContact(e)}),this.enemyFireballs=this.physics.add.group(),this.physics.add.collider(this.enemyFireballs,this.layers.details,function(e){return t.explodeOnContact(e)}),this.physics.add.collider(this.enemyFireballs,this.layers.world,function(e){return t.explodeOnContact(e)}),this.physics.world.on("worldbounds",function(t){var e=t.gameObject;e.frame.name.indexOf("fireball")>=0&&e.destroy()}),this.handleCollisions(),this.handleMonsters(),this.handleBoss(),this.showQuest();var i=this.creatures.player.spr;this.pointerDownMove=!1,this.layers.background.setInteractive(),this.layers.background.on("pointerdown",function(e){t.pointerDownMove=e}),this.layers.background.on("pointermove",function(e){t.pointerDownMove&&(t.pointerDownMove=e)}),this.layers.background.on("pointerup",function(){t.pointerDownMove=!1,i.anims.stop(),t.creatures.player.spr.setVelocity(0)}),this.events.once("shutdown",this.shutdown,this)}},{key:"update",value:function(){this.creatures.player.entity.update(this.pointerDownMove),this.creatures.boss.entity.update(),this.creatures.monster1.entity.update()}},{key:"shutdown",value:function(){this.sys.game.events.off("resize",this.resize,this)}},{key:"waitInputToContinue",value:function(t){function e(e){switch(e.code){case"Enter":t()}}if("function"!=typeof t)return this.input.off("pointerup"),void this.input.keyboard.off("keyup");this.input.on("pointerup",t,this),this.input.keyboard.on("keyup",e,this)}},{key:"createModal",value:function(t,e,i,n){var r=t.split("\n").length,o=20*r,s="number"==typeof n?n:.95*this.CONFIG.width/this.cameras.main.zoom,a=o+12;e="number"==typeof e?e:(this.CONFIG.width-s)/2,e<0&&(e=this.CONFIG.width-s+e),i="number"==typeof i?i:this.CONFIG.centerY+5;var c=this.stylesData.questTest;c.wordWrap={width:s-6,useAdvancedWrap:!0};var l=this.add.text(e+6,i+6,t,c).setLineSpacing(3).setOrigin(0).setScrollFactor(0).setAlpha(0).setDepth(10);a=l.displayHeight+12;var u=this.add.graphics({x:e,y:i});u.clear().setScrollFactor(0),u.fillStyle("0xFFFFFF",1),u.fillRect(0,0,s,a).setAlpha(0).setDepth(9);var h=this.add.graphics({x:e,y:i});return h.clear().setScrollFactor(0),h.lineStyle(3,"0x4D6592",1),h.strokeRect(0,0,s,a).setAlpha(0).setDepth(9),[l,u,h]}},{key:"showQuest",value:function(){var t=this,e=this.createModal(this.textsData.QUEST_1),i=this.tweens.add({targets:e,alpha:1,duration:1e3,ease:"Cubic",easeParams:[1,1]});this.waitInputToContinue(function(){t.waitInputToContinue(!1),t.startQuest(),i.stop(),t.tweens.add({targets:e,alpha:0,duration:900,ease:"Cubic",easeParams:[1,1],onComplete:function(){i.stop(),t.showQuestStatus()}})})}},{key:"startQuest",value:function(){var t=this;this.questRemainingCoins=6,this.questRequiredCoins=6,this.questEnded=!1,this.coins=this.map.createFromObjects("objects",1576,{key:"worldAnim",frame:"coin-1"}),this.coins.forEach(function(e){return t.physics.add.existing(e)}),this.anims.play("spr-coin",this.coins),this.physics.add.overlap(this.creatures.player.spr,this.coins,this.collectCoin,null,this)}},{key:"showQuestStatus",value:function(){this.statusModal=this.createModal(this.textsData.QUEST_STATUS+this.questRemainingCoins+"  / "+this.questRequiredCoins,-5,5,.6*this.CONFIG.width),this.tweens.add({targets:this.statusModal,alpha:1,duration:1e3,ease:"Cubic",easeParams:[1,1],delay:0})}},{key:"updateQuestStatus",value:function(){this.statusModal[0].setText(this.textsData.QUEST_STATUS+this.questRemainingCoins+"  / "+this.questRequiredCoins)}},{key:"collectCoin",value:function(t,e){var i=this;e.destroy(),this.sound.play("coin"),this.questRemainingCoins--,this.updateQuestStatus(),this.creatures.player.entity.addScore(1),0===this.questRemainingCoins&&(this.coins.forEach(function(t){return t.destroy()}),this.statusModal[0].setText(this.textsData.QUEST_SUCCESS1),this.time.addEvent({delay:2e3,callback:function(){i.statusModal[0].setText(i.textsData.QUEST_SUCCESS2)},callbackScope:this}))}},{key:"returnQuest",value:function(){var t=this;if(!(this.questEnded||this.questRemainingCoins>0)){this.questEnded=!0,this.tweens.add({targets:this.statusModal,alpha:0,duration:1e3,ease:"Cubic",easeParams:[1,1],delay:0});var e=this.createModal(this.textsData.QUEST_ENDED),i=this.tweens.add({targets:e,alpha:1,duration:1e3,ease:"Cubic",easeParams:[1,1]});this.time.addEvent({delay:1e3,callback:function(){t.waitInputToContinue(function(){i.stop(),t.playerHasMagicStaff=!0,t.actionBar.setVisible(!0),t.showStaffTuto(e)})},callbackScope:this,repeat:3})}}},{key:"showStaffTuto",value:function(t){var e=this,i=.95*this.CONFIG.width/this.cameras.main.zoom,n=this.game.device.os.desktop?"TUTO_STAFF_DESKTOP":"TUTO_STAFF_MOBILE";t[0].setText(this.textsData[n]),t[1].clear().fillRect(0,0,i,72),t[2].clear().lineStyle(3,"0x4D6592",1).strokeRect(0,0,i,72),this.waitInputToContinue(function(){e.waitInputToContinue(!1),e.tweens.add({targets:t,alpha:0,duration:900,ease:"Cubic",easeParams:[1,1]})})}},{key:"showDebugInfos",value:function(){this.physics.world.createDebugGraphic();var t=this.add.graphics().setAlpha(.75).setDepth(20);this.layers.background.renderDebug(t,{tileColor:null,collidingTileColor:new Phaser.Display.Color(243,134,48,255),faceColor:new Phaser.Display.Color(40,39,37,255)}),this.layers.world.renderDebug(t,{tileColor:null,collidingTileColor:new Phaser.Display.Color(243,134,48,255),faceColor:new Phaser.Display.Color(40,39,37,255)}),this.layers.details.renderDebug(t,{tileColor:null,collidingTileColor:new Phaser.Display.Color(243,134,48,255),faceColor:new Phaser.Display.Color(40,39,37,255)})}},{key:"handleBoss",value:function(){var t=this;this.physics.add.collider(this.creatures.player.spr,this.creatures.boss.spr,this.dammagePlayer,null,this),this.physics.add.overlap(this.creatures.player.spr,this.enemyFireballs,function(e,i){t.explodeOnContact(i),t.sound.play("damage"),t.dammagePlayer(e,null)},null,this),this.physics.add.overlap(this.creatures.boss.spr,this.fireballs,function(e,i){t.explodeOnContact(i),t.sound.play("damage"),t.creatures.boss.entity.takeDamage(e,t.enemyDeath)},null,this),this.creatures.boss.spr.setVelocityX(-20),this.physics.add.collider(this.creatures.boss.spr,[this.layers.background,this.layers.world,this.layers.details,this.enemyWalls]);var e=this.map.filterObjects("objects",function(t){return"bossDetectPlayer"===t.type});this.detectPlayer=this.physics.add.group(),e.forEach(function(e){var i=t.add.rectangle(e.x,e.y,e.width,e.height);i.setOrigin(0,0).setAlpha(.5),i.name=e.name,t.detectPlayer.add(i)});var i=this.creatures.player.spr;this.physics.add.overlap(i,this.detectPlayer,function(e,n){"bossDetectPlayer"===n.name?t.creatures.boss.entity.startAttack(i,t.enemyFireballs):"bossDetectPlayerOut"===n.name&&t.creatures.boss.entity.stopAttack()})}},{key:"handleMonsters",value:function(){var t=this;this.physics.add.collider(this.creatures.player.spr,this.creatures.monster1.spr,this.dammagePlayer,null,this),this.physics.add.overlap(this.creatures.monster1.spr,this.fireballs,function(e,i){t.explodeOnContact(i),t.sound.play("damage"),t.creatures.monster1.entity.takeDamage(e,t.enemyDeath)},null,this);var e=this.map.filterObjects("objects",function(t){return"monsterLimits"===t.name});this.enemyWalls=this.physics.add.group(),e.forEach(function(e){var i=t.add.rectangle(e.x,e.y,e.width,e.height);i.setOrigin(0,0).setAlpha(.5),t.enemyWalls.add(i),t.physics.add.existing(i),i.body.immovable=!0,i.body.setImmovable(!0)}),this.creatures.monster1.spr.map(function(t){return t.setVelocityX(40).setVelocityY(40)}),this.physics.add.collider(this.creatures.monster1.spr,[this.layers.background,this.layers.world,this.layers.details,this.enemyWalls])}},{key:"handleCollisions",value:function(){var t=this,e=this.creatures.player.spr;this.physics.add.collider(e,[this.layers.background,this.layers.world,this.layers.details,this.creatures.grandma.spr,this.creatures.aryl.spr]),this.physics.add.collider(e,this.creatures.oldman.spr,this.returnQuest,null,this);var i=this.map.filterObjects("objects",function(t){return"endDemo"===t.name}),n=this.physics.add.group();i.forEach(function(e){var i=t.add.rectangle(e.x,e.y,e.width,e.height);i.setOrigin(0,0).setAlpha(.5),i.name=e.name,n.add(i)}),this.physics.add.overlap(e,n,function(){t.tweens.add({targets:e,alpha:0,duration:1500,ease:"Cubic",easeParams:[1,1],delay:500,onComplete:function(){t.scene.start("DemoEnding")}})})}},{key:"explodeOnContact",value:function(t){var e=this.add.particles("worldAnim"),i=e.createEmitter({frame:{frames:["fireball-1","fireball-2","fireball-3","fireball-4"],cycle:!0},x:t.x,y:t.y,angle:{min:0,max:360},scale:{start:1,end:0},blendMode:"SCREEN",frequency:20,quantity:2,lifespan:800});i.setPosition(t.x,t.y),i.explode(),t.destroy()}},{key:"enemyDeath",value:function(){this.creatures.player.entity.addScore(10)}},{key:"throwFireball",value:function(){if(this.playerHasMagicStaff){var t=this.fireballs.create(0,0,"worldAnim","fireball-1").setScale(.25,.25).setVelocity(0);t.setCollideWorldBounds(!0),t.allowGravity=!1,t.enableBody(),t.body.setCollideWorldBounds(!0),t.body.onWorldBounds=!0,t.anims.play("spr-fireball",!0),this.sound.play("fireball");var e=this.creatures.player.spr.x,i=this.creatures.player.spr.y,n=this.creatures.player.spr.frame.name;n.indexOf("walkup")>=0?t.setPosition(e+10,i-5).setVelocityY(-200):n.indexOf("walkdown")>=0?t.setPosition(e+10,i+25).setVelocityY(200):n.indexOf("walkleft")>=0?t.setPosition(e-5,i+10).setVelocityX(-200):n.indexOf("walkright")>=0&&t.setPosition(e+20,i+10).setVelocityX(200)}}},{key:"getCreature",value:function(t){var e,i=t.type,n=t.spawn,r=t.frame,o=t.animation;switch(i){case"player":e=new w.a(this,this.map,n,"worldAnim",r,o);break;case"boss":e=new g.a(this,this.map,n,"worldAnim",r,o);break;case"monster":e=new v.a(this,this.map,n,"worldAnim",r,o);break;default:e=new O.a(this,this.map,n,"worldAnim",r,o)}return e}},{key:"loadLevelElements",value:function(){this.layers={},this.map=this.add.tilemap("level1");var t=this.map.addTilesetImage("overworld","gameTile",16,16,1,2);this.layers.background=this.map.createDynamicLayer("background",t,0,0),this.layers.world=this.map.createDynamicLayer("world",t,0,0),this.layers.details=this.map.createDynamicLayer("details",t,0,0).setDepth(2),this.sys.animatedTiles.init(this.map),this.layers.background.setCollisionByProperty({collide:!0}),this.layers.world.setCollisionByProperty({collide:!0}),this.layers.details.setCollisionByProperty({collide:!0})}},{key:"createWorldInhabitants",value:function(){var t=this;this.creatures={},this.spritesData.forEach(function(e){var i=t.getCreature(e);t.creatures[e.name]={entity:i,spr:i.create()}})}},{key:"createWorldAnimations",value:function(){var t=this;this.talkingEntity=new m.a(this,this.map,"talkingSpawn","worldAnim","talking-1","spr-talking"),this.talking=this.talkingEntity.create()[0],this.talking.setDepth(2),this.time.addEvent({delay:500,callback:function(){return t.talking.visible=!t.talking.visible},callbackScope:this,repeat:3})}},{key:"collectHeart",value:function(t,e){this.creatures.player.entity.getHealing(),e.disableBody(!0,!0)}},{key:"dammagePlayer",value:function(t,e){this.sound.play("damage"),this.creatures.player.entity.takeDamage(t),this.cameras.main.flash(200),e&&e.body&&(e.body.touching.left?e.body.velocity.x=150:e.body.touching.right?e.body.velocity.x=-150:e.body.touching.up?e.body.velocity.y=150:e.body.touching.down&&(e.body.velocity.y=-150),this.time.addEvent({delay:150,callback:function(){e.body.setVelocity(0)},callbackScope:this,repeat:0}))}}]),e}(b.a);e.a=S},1157:function(t,e,i){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e,i){return e&&o(t.prototype,e),i&&o(t,i),t}function a(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?c(t):e}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t,e,i){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=u(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function u(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}i.d(e,"a",function(){return d});var y=i(470),d=function(t){function e(t,i,n,o,s,c){var l;return r(this,e),l=a(this,h(e).call(this,t,i,n,o,s,c)),l.life=7,l.speed=60,l.state="walking",l.nextState="walking",l.inTransition=!1,l.pauseAttack=!1,l.attackTarget,l}return f(e,t),s(e,[{key:"create",value:function(){return this.spr=l(h(e.prototype),"create",this).call(this),this.spr=this.spr?this.spr[0]:{},this.spr.setSize(20,24,!0),this.spr.body.offset.y=7,this.spawnPoint={x:this.spr.x,y:this.spr.y},this.spr}},{key:"startAttack",value:function(t,e){this.attackTarget=t,this.enemyFireballs=e,this.isAttackPaused=!1,this.requireState("attack")}},{key:"throwFireball",value:function(){var t=this;if(0!==this.life&&!this.pauseAttack&&"attack"===this.nextState){this.pauseAttack=!0;var e=this.enemyFireballs.create(0,0,"worldAnim","fireball-1").setScale(.25,.25).setVelocity(0);e.setCollideWorldBounds(!0),e.setSize(32,32,!0),e.allowGravity=!1,e.enableBody(),e.body.setCollideWorldBounds(!0),e.body.onWorldBounds=!0,e.body.offset.y=25,e.body.offset.x=30,e.anims.play("spr-fireball",!0),this.ctx.sound.play("fireball");var i=this.spr.x,n=this.spr.y;e.setPosition(i,n+10),this.ctx.physics.moveTo(e,this.attackTarget.x,this.attackTarget.y,40);var r=Phaser.Math.RND.between(1e3,3e3);this.ctx.time.addEvent({delay:r,callback:function(){0!==t.life&&t.spr&&t.spr.body&&(t.pauseAttack=!1,t.throwFireball())},callbackScope:this})}}},{key:"stopAttack",value:function(){this.requireState("walking")}},{key:"requireState",value:function(t){0!==this.life&&this.spr&&this.spr.body&&(this.state=this.nextState,this.nextState=t,this.inTransition=!1)}},{key:"transitionToState",value:function(t,e){var i=this;if(t!==e){if("attack"===e){if(this.inTransition)return;this.ctx.physics.moveTo(this.spr,this.attackTarget.x,this.spr.y,40),this.ctx.time.addEvent({delay:1e3,callback:function(){if(0===i.life||!i.spr||!i.spr.body)return void console.log("boss dead");i.spr.setVelocityX(0),i.spr.setVelocityY(0),i.spr.anims.play("spr-pirate-stand",!0),i.inTransition=!1,i.state=e,i.throwFireball()},callbackScope:this})}else if("walking"===e){if(this.inTransition)return void(Math.round(this.spr.x)===Math.round(this.spawnPoint.x)&&Math.round(this.spr.y)===Math.round(this.spawnPoint.y)&&(this.spr.setVelocityY(0),this.spr.setVelocityX(-20),this.inTransition=!1,this.state=e));this.ctx.physics.moveTo(this.spr,this.spawnPoint.x,this.spawnPoint.y,20)}this.inTransition=!0}}},{key:"playWalkAnims",value:function(){this.spr&&this.spr.body&&(0===this.spr.body.velocity.x&&0===this.spr.body.velocity.y?this.spr.anims.play("spr-pirate-stand",!0):this.spr.body.velocity.x<0?this.spr.anims.play("spr-pirate-walkleft",!0):this.spr.body.velocity.x>0&&this.spr.anims.play("spr-pirate-walkright",!0))}},{key:"update",value:function(){0!==this.life&&this.spr&&this.spr.body&&(this.transitionToState(this.state,this.nextState),this.playWalkAnims())}}]),e}(y.a)},1158:function(t,e,i){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e,i){return e&&o(t.prototype,e),i&&o(t,i),t}function a(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?c(t):e}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t,e,i){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=u(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function u(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}i.d(e,"a",function(){return d});var y=i(142),d=function(t){function e(t,i,n,o,s,c){return r(this,e),a(this,h(e).call(this,t,i,n,o,s,c))}return f(e,t),s(e,[{key:"create",value:function(){return this.spr=l(h(e.prototype),"create",this).call(this),this.spr&&this.spr[0]?(this.spr=this.spr[0],this.spr.setDepth(1),this.spr.score=0,this.spr.life=3,this.spr.speed=80,this.spr.setSize(16,20,!0),this.spr.body.offset.y=2,this.createLifeBar(),this.createScoreText(),this.spr):(console.error("Player creation was not possible"),{})}},{key:"update",value:function(t){this.spr.body.setVelocity(0),this.handleMouseControls(t)||this.handleKeyboardControls(),this.spr.body.velocity.normalize().scale(this.spr.speed),0===this.spr.body.velocity.x&&0===this.spr.body.velocity.y&&this.spr.anims.stop()}},{key:"handleKeyboardControls",value:function(){this.ctx.cursors.Q.isDown||this.ctx.cursors.left.isDown?(this.spr.setVelocityX(-this.spr.speed),this.spr.anims.play("spr-hero-walkleft",!0)):(this.ctx.cursors.D.isDown||this.ctx.cursors.right.isDown)&&(this.spr.setVelocityX(this.spr.speed),this.spr.anims.play("spr-hero-walkright",!0)),this.ctx.cursors.S.isDown||this.ctx.cursors.down.isDown?(this.spr.setVelocityY(this.spr.speed),this.spr.anims.play("spr-hero-walkdown",!0)):(this.ctx.cursors.Z.isDown||this.ctx.cursors.up.isDown)&&(this.spr.setVelocityY(-this.spr.speed),this.spr.anims.play("spr-hero-walkup",!0))}},{key:"handleMouseControls",value:function(t){if(!t)return!1;this.ctx.physics.moveTo(this.spr,t.worldX,t.worldY,60);var e=t.worldX-this.spr.x,i=t.worldY-this.spr.y;Math.abs(i)>Math.abs(e)?i>0?this.spr.anims.play("spr-hero-walkdown",!0):this.spr.anims.play("spr-hero-walkup",!0):e>0?this.spr.anims.play("spr-hero-walkright",!0):this.spr.anims.play("spr-hero-walkleft",!0)}},{key:"attack",value:function(){}},{key:"move",value:function(){}},{key:"createLifeBar",value:function(){var t={x:12,y:28};this.lifeSprites=[];for(var e=0;e<this.spr.life;e++){var i=this.ctx.physics.add.sprite(t.x+20*e,t.y,this.spriteCache,"heart-1");i.setDepth(10),i.setScrollFactor(0),i.anims.play("spr-heart",!0),this.lifeSprites.push(i)}}},{key:"createScoreText",value:function(){this.scoreText=this.ctx.add.text(5,5,"Score: 0",{fontSize:"16px",fill:"#fff"}),this.scoreText.setDepth(10),this.scoreText.setScrollFactor(0)}},{key:"addScore",value:function(t){this.spr.score+=t,this.refreshScore()}},{key:"refreshScore",value:function(){this.scoreText.setText("Score: "+this.spr.score)}},{key:"refreshLife",value:function(){var t=this;this.lifeSprites.forEach(function(e,i){e.visible=t.spr.life>=i+1})}},{key:"isDead",value:function(t,e){return t.life<=0&&("function"==typeof e&&e.call(this.ctx),this.ctx.scene.start("GameOver"),!0)}},{key:"getHealing",value:function(){this.spr.life++,this.refreshLife()}}]),e}(y.a)},1159:function(t,e,i){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e,i){return e&&o(t.prototype,e),i&&o(t,i),t}function a(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?c(t):e}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t,e,i){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=u(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function u(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}i.d(e,"a",function(){return d});var y=i(142),d=function(t){function e(t,i,n,o,s,c){var l;return r(this,e),l=a(this,h(e).call(this,t,i,n,o,s,c)),l.life=3,l.speed=60,l}return f(e,t),s(e,[{key:"create",value:function(){return this.spr=l(h(e.prototype),"create",this).call(this),this.spr=this.spr?this.spr[0]:{},this.spr.setDepth(1),this.spr.setSize(16,20,!0),this.spr.body.offset.y=2,this.spr.body.immovable=!0,this.spr}},{key:"update",value:function(){}},{key:"takeDamage",value:function(){}},{key:"getHealing",value:function(){}}]),e}(y.a)},1160:function(t,e,i){!function(e,i){t.exports=i()}(window,function(){return function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(t){function e(t,i){n(this,e);var o=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));return o.map=null,o.animatedTiles=[],o.rate=1,o.active=!1,o.activeLayer=[],o.followTimeScale=!0,t.sys.settings.isBooted||t.sys.events.once("boot",o.boot,o),o}return o(e,t),s(e,[{key:"boot",value:function(){var t=this.systems.events;t.on("postupdate",this.postUpdate,this),t.on("shutdown",this.shutdown,this),t.on("destroy",this.destroy,this)}},{key:"init",value:function(t){var e=this.getAnimatedTiles(t),i={map:t,animatedTiles:e,active:!0,rate:1,activeLayer:[]};t.layers.forEach(function(){return i.activeLayer.push(!0)}),this.animatedTiles.push(i),1===this.animatedTiles.length&&(this.active=!0)}},{key:"setRate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null===e)null===i?this.rate=t:this.animatedTiles[i].rate=t;else{var n=function(i){i.forEach(function(i){i.index===e&&(i.rate=t)})};null===i?this.animatedTiles.forEach(function(t){n(t.animatedTiles)}):n(this.animatedTiles[i].animatedTiles)}}},{key:"resetRates",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null===t?(this.rate=1,this.animatedTiles.forEach(function(t){t.rate=1,t.animatedTiles.forEach(function(t){t.rate=1})})):(this.animatedTiles[t].rate=1,this.animatedTiles[t].animatedTiles.forEach(function(t){t.rate=1}))}},{key:"resume",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=null===i?this:this.animatedTiles[i];null===e?n.active=!0:(n.activeLayer[e]=!0,n.animatedTiles.forEach(function(i){t.updateLayer(i,i.tiles[e])}))}},{key:"pause",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=null===e?this:this.animatedTiles[e];null===t?i.active=!1:i.activeLayer[t]=!1}},{key:"postUpdate",value:function(t,e){var i=this;if(this.active){var n=e*this.rate*(this.followTimeScale?this.scene.time.timeScale:1);this.animatedTiles.forEach(function(t){if(t.active){var e=n*t.rate;t.animatedTiles.forEach(function(n){if(n.next-=e*n.rate,n.next<0){var r=n.currentFrame,o=n.frames[r].tileid,s=r+1;s>n.frames.length-1&&(s=0),n.next=n.frames[s].duration,n.currentFrame=s,n.tiles.forEach(function(e,r){t.activeLayer[r]&&i.updateLayer(n,e,o)})}})}})}}},{key:"updateLayer",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,n=[],r=t.frames[t.currentFrame].tileid;e.forEach(function(t){i>-1&&(null===t||t.index!==i)?n.push(t):t.index=r}),n.forEach(function(t){var i=e.indexOf(t);i>-1?e.splice(i,1):console.error("This shouldn't happen. Not at all. Blame Phaser Animated Tiles plugin. You'll be fine though.")})}},{key:"shutdown",value:function(){}},{key:"destroy",value:function(){this.shutdown(),this.scene=void 0}},{key:"getAnimatedTiles",value:function(t){var e=this,i=[];return t.tilesets.forEach(function(e){var n=e.tileData;Object.keys(n).forEach(function(r){if(r=parseInt(r),n[r].hasOwnProperty("animation")){var o={index:r+e.firstgid,frames:[],currentFrame:0,tiles:[],rate:1};n[r].animation.forEach(function(t){var i={duration:t.duration,tileid:t.tileid+e.firstgid};o.frames.push(i)}),o.next=o.frames[0].duration,t.layers.forEach(function(t){if("StaticTilemapLayer"===t.tilemapLayer.type)return void o.tiles.push([]);var i=[];t.data.forEach(function(t){t.forEach(function(t){t.index-e.firstgid===r&&i.push(t)})}),o.tiles.push(i)}),i.push(o)}})}),t.layers.forEach(function(t,i){e.activeLayer[i]=!0}),i}},{key:"putTileAt",value:function(t,e,i,n){}},{key:"updateAnimatedTiles",value:function(){var t=null;null===t&&(t=[],this.animatedTiles.forEach(function(e){t.push(e)})),t.forEach(function(t){t.animatedTiles.forEach(function(e){e.tiles.forEach(function(i,n){if("StaticTilemapLayer"!==t.map.layers[n].type)for(var r=0;r<10;r++)for(var o=0;o<10;o++){var s=t.map.layers[n].data[r][o];s.index==e.index&&(-1===i.indexOf(s)&&i.push(s),s.index=e.frames[e.currentFrame].tileid)}})})})}}]),e}(Phaser.Plugins.ScenePlugin);a.register=function(t){t.register("AnimatedTiles",a,"animatedTiles")},t.exports=a}])})},1161:function(t,e,i){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e,i){return e&&o(t.prototype,e),i&&o(t,i),t}function a(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?c(t):e}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t,e,i){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=u(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function u(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var y=i(88),d=i(141),b=function(t){function e(){return r(this,e),a(this,h(e).call(this,{key:"GameOver",active:!1}))}return f(e,t),s(e,[{key:"init",value:function(){this.CONFIG=this.sys.game.CONFIG}},{key:"create",value:function(){l(h(e.prototype),"create",this).call(this),this.createBackground(),this.textsData=this.cache.json.get("textsData"),this.title=new d.a(this,this.CONFIG.centerX,50,this.textsData.GAME_OVER,24,.5),this.txtProgress=new d.a(this,this.CONFIG.centerX,this.CONFIG.centerY+100,this.textsData.GAME_OVER_RESTART,16,{x:.5,y:1}),this.createMouseInput(),this.createKeyboardInput()}},{key:"createBackground",value:function(){this.bg=this.add.graphics({x:0,y:0}),this.bg.fillStyle("0x000000",1),this.bg.fillRect(0,0,this.CONFIG.width,this.CONFIG.height)}},{key:"createMouseInput",value:function(){this.input.on("pointerup",this.goPlay,this)}},{key:"createKeyboardInput",value:function(){var t=this,e=function(e){switch(e.code){case"Enter":t.goPlay()}};this.input.keyboard.on("keyup",e,this)}},{key:"goPlay",value:function(){this.scene.start("Game")}}]),e}(y.a);e.a=b},1162:function(t,e,i){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e,i){return e&&o(t.prototype,e),i&&o(t,i),t}function a(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?c(t):e}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t,e,i){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=u(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function u(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var y=i(88),d=i(141),b=function(t){function e(){return r(this,e),a(this,h(e).call(this,{key:"DemoEnding",active:!1}))}return f(e,t),s(e,[{key:"init",value:function(){this.CONFIG=this.sys.game.CONFIG}},{key:"create",value:function(){l(h(e.prototype),"create",this).call(this),this.createBackground(),this.textsData=this.cache.json.get("textsData"),this.title=new d.a(this,this.CONFIG.centerX,150,this.textsData.DEMO_END,24,.5);this.maxWidth=.95*this.CONFIG.width/this.cameras.main.zoom-15,this.add.text(this.CONFIG.centerX,50,this.textsData.DEMO_STORY,{fill:"#fff",fontSize:"20px",fontFamily:"Arial, sans serif",wordWrap:{width:this.maxWidth,useAdvancedWrap:!0}}).setOrigin(.5),this.createMouseInput(),this.createKeyboardInput()}},{key:"createBackground",value:function(){this.bg=this.add.graphics({x:0,y:0}),this.bg.fillStyle("0x000000",1),this.bg.fillRect(0,0,this.CONFIG.width,this.CONFIG.height)}},{key:"createMouseInput",value:function(){this.input.on("pointerup",this.goPlay,this)}},{key:"createKeyboardInput",value:function(){var t=this,e=function(e){switch(e.code){case"Enter":t.goPlay()}};this.input.keyboard.on("keyup",e,this)}},{key:"goPlay",value:function(){this.scene.start("Menu")}}]),e}(y.a);e.a=b},141:function(t,e,i){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e,i){return e&&o(t.prototype,e),i&&o(t,i),t}i.d(e,"a",function(){return a});var a=function(){function t(e,i,n,o,s,a,c){r(this,t),this.ctx=e,this.x=i,this.y=n,this.text=o;var l=.95*e.CONFIG.width/e.cameras.main.zoom;this.style={fontFamily:c||"ClickPixel",fontSize:s,color:"0xFFFFFF",align:"center",wordWrap:{width:l-15,useAdvancedWrap:!0}},this.origin=this.initOrigin(a),this.obj=this.createText()}return s(t,[{key:"initOrigin",value:function(t){return"number"==typeof t?{x:t,y:t}:"object"===n(t)?t:{x:.5,y:.5}}},{key:"createText",value:function(){var t=this.ctx.add.bitmapText(this.x,this.y,this.style.fontFamily,this.text,this.style.fontSize,this.style.align);return t.setOrigin(this.origin.x,this.origin.y),t}},{key:"destroy",value:function(){this.obj.destroy(),this.obj=null}},{key:"setText",value:function(t){this.text=t,this.obj.setText(t)}},{key:"setX",value:function(t){this.x=t,this.obj.setX(t)}},{key:"setY",value:function(t){this.y=t,this.obj.setY(t)}},{key:"setOrigin",value:function(t){this.origin=this.initOrigin(t),this.obj.setOrigin(t)}},{key:"setDepth",value:function(t){this.obj.setDepth(t)}},{key:"setScrollFactor",value:function(t,e){this.obj.setScrollFactor(t,e)}},{key:"getCenter",value:function(){return this.obj.getCenter()}},{key:"getTopLeft",value:function(){return this.obj.getTopLeft()}},{key:"getTopRight",value:function(){return this.obj.getTopRight()}},{key:"getBottomLeft",value:function(){return this.obj.getBottomLeft()}},{key:"getBottomRight",value:function(){return this.obj.getBottomRight()}}]),t}()},142:function(t,e,i){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e,i){return e&&o(t.prototype,e),i&&o(t,i),t}i.d(e,"a",function(){return a});var a=function(){function t(e,i,n,o,s,a){r(this,t),this.map=i,this.spawnName=n,this.ctx=e,this.spriteCache=o||"worldAnim",this.spriteKey=s,this.animName=a}return s(t,[{key:"create",value:function(){var t=this;"object"===n(this.spawnName)&&(this.spawnName=[this.spawnName]);var e=this.findObjectsByType(this.spawnName,this.map),i=[];return e.forEach(function(e){i.push(t.addSprite(e,t.ctx,t.spriteCache,t.spriteKey,t.animName))}),i}},{key:"addSprite",value:function(t,e,i,n,r){var o=e.physics.add.sprite(t.x,t.y,i,n);return this.ctx.physics.world.enable(o),o.enableBody(),o.body.bounce.setTo(1,1),o.setCollideWorldBounds(!0),o.onWorldBounds=!0,o.setOrigin(0),"number"!=typeof r&&"string"!=typeof r||o.anims.play(r,!0),o}},{key:"bumped",value:function(t){t.body.touching.left?t.body.velocity.x=100:t.body.touching.right?t.body.velocity.x=-100:t.body.touching.up?t.body.velocity.y=100:t.body.touching.down&&(t.body.velocity.y=-100),this.ctx.time.addEvent({delay:150,callback:function(){t.setVelocity(0)},callbackScope:this,repeat:0})}},{key:"takeDamage",value:function(t,e){t.immune||(t.immune=!0,t.setTint(16711680),t.life--,this.refreshLife(),this.isDead(t,e)||(this.bumped(t),this.ctx.time.addEvent({delay:800,callback:function(){t.clearTint(),t.immune=!1},callbackScope:this,repeat:0})))}},{key:"isDead",value:function(t,e){return t.life<=0&&("function"==typeof e&&e.call(this.ctx),t.anims.stop(),t.setVelocityX(0).setVelocityY(0),this.ctx.tweens.add({targets:t,alpha:0,duration:800,ease:"Linear",delay:0,onComplete:function(){t.destroy()}}),!0)}},{key:"findObjectsByType",value:function(t,e){var i=[];return e&&e.objects&&e.objects[0].objects?(e.objects[0].objects.forEach(function(n){n.type===t&&(n.y-=e.tileHeight,i.push(n))}),i):i}},{key:"refreshLife",value:function(){}}]),t}()},469:function(t,e,i){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e,i){return e&&o(t.prototype,e),i&&o(t,i),t}function a(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?c(t):e}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t,e,i){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=u(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function u(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var y=i(88),d=i(141),b=function(t){function e(t){return r(this,e),t||(t={key:"Menu",active:!1}),a(this,h(e).call(this,t))}return f(e,t),s(e,[{key:"init",value:function(){this.CONFIG=this.sys.game.CONFIG}},{key:"create",value:function(){l(h(e.prototype),"create",this).call(this),this.createBackground(),this.textsData=this.cache.json.get("textsData"),this.title=new d.a(this,this.CONFIG.centerX,-80,this.textsData.GAME_TITLE,40,.5),this.title.obj.setAlpha(0),this.tweens.add({targets:this.title.obj,y:this.CONFIG.centerY-70,alpha:1,duration:4e3,ease:"Cubic",easeParams:[1,1],delay:200}),this.add.text(this.CONFIG.centerX,this.CONFIG.height-20,this.textsData.MY_INFO,{fill:"#fff",fontSize:"10px",fontFamily:"Arial, sans serif"}).setOrigin(.5),this.showStartText(4e3),this.menuMusic=this.sound.add("intro"),this.menuMusic.play(),this.waitInputToContinue(this.goPlay)}},{key:"createBackground",value:function(){this.bg=this.add.graphics({x:0,y:0}),this.bg.fillStyle("0x000000",1),this.bg.fillRect(0,0,this.CONFIG.width,this.CONFIG.height);var t=this.CONFIG.width>this.CONFIG.height?this.CONFIG.width:this.CONFIG.height;this.bgImage=this.physics.add.image(this.CONFIG.centerX,this.CONFIG.centerY,"titlescreen").setDisplaySize(t,t).setOrigin(.5,.5)}},{key:"showStartText",value:function(t,e){var i=this;e||(e="GAME_START"),this.txtProgress?this.txtProgress.setText(this.textsData[e]):(this.txtProgress=new d.a(this,this.CONFIG.centerX,this.CONFIG.centerY+100,this.textsData[e],16,{x:.5,y:1}),this.txtProgress.obj.setAlpha(0),this.time.addEvent({delay:t,callback:function(){i.tweens.add({targets:i.txtProgress.obj,alpha:1,duration:1500,ease:"Linear",easeParams:[3.5],yoyo:!0,loop:-1})},callbackScope:this,repeat:0}))}},{key:"waitInputToContinue",value:function(t){var e=this;if("function"!=typeof t)return this.input.off("pointerup"),void this.input.keyboard.off("keyup");this.input.on("pointerup",t,this);var i=function(i){switch(i.code){case"Enter":t.call(e)}};this.input.keyboard.on("keyup",i,this)}},{key:"goPlay",value:function(){this.scene.start("Intro",{music:this.menuMusic})}}]),e}(y.a);e.a=b},470:function(t,e,i){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e,i){return e&&o(t.prototype,e),i&&o(t,i),t}function a(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?c(t):e}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t,e,i){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=u(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function u(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}i.d(e,"a",function(){return d});var y=i(142),d=function(t){function e(t,i,n,o,s,c){return r(this,e),a(this,h(e).call(this,t,i,n,o,s,c))}return f(e,t),s(e,[{key:"create",value:function(){return this.spr=l(h(e.prototype),"create",this).call(this),this.spr.map(function(t){t.life=3,t.setSize(16,16,!0),t.body.offset.y=7}),this.spr}},{key:"update",value:function(){this.spr.forEach(function(t){t.body&&0!==t.life&&(0===t.body.velocity.x&&0===t.body.velocity.y?t.setVelocityX(40).setVelocityY(40):t.body.velocity.x<0?t.anims.play("spr-log-walkleft",!0):t.body.velocity.x>0&&t.anims.play("spr-log-walkright",!0))})}}]),e}(y.a)},471:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(143),r=(i.n(n),i(1153)),o=i(1154),s=i(469),a=i(1155),c=i(1156),l=i(1161),u=i(1162),h=300,f=300;window.innerWidth/window.innerHeight>.6?h=f*window.innerWidth/window.innerHeight:f=h*window.innerHeight/window.innerWidth;var p={type:Phaser.AUTO,parent:"phaser-app",title:"A Witch's Journey",url:"",width:h,height:f,physics:{default:"arcade",arcade:{gravity:{y:0}}},scene:[r.a,o.a,s.a,a.a,c.a,l.a,u.a],pixelArt:!0,roundPixels:!0,backgroundColor:"0x000000"},y=new Phaser.Game(p);y.IS_DEV=!0,y.VERSION="1.0.7",y.LANGUAGE="en",y.URL="",y.CONFIG={width:p.width,height:p.height,language:y.LANGUAGE,centerX:Math.round(p.width/2),centerY:Math.round(p.height/2),tile:32},window.onresize=function(){y.events.emit("resize")}},88:function(t,e,i){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e,i){return e&&o(t.prototype,e),i&&o(t,i),t}function a(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?c(t):e}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=i(143),p=(i.n(f),function(t){function e(){return r(this,e),a(this,l(e).apply(this,arguments))}return u(e,t),s(e,[{key:"init",value:function(){this.URL=this.sys.game.URL,this.CONFIG=this.sys.game.CONFIG,this.language=this.CONFIG.language}},{key:"preload",value:function(){}},{key:"create",value:function(){var t=this;this.sys.game.events.on("resize",function(){return t.resizeApp(t.sys.game.CONFIG)},this),this.resizeApp(this.sys.game.CONFIG)}},{key:"update",value:function(){}},{key:"resizeApp",value:function(t){var e=t.width/t.height,i=document.getElementById("phaser-app");i.style.width=window.innerHeight*e+"px",i.style.height=window.innerHeight+"px";var n=document.getElementsByTagName("canvas")[0],r=parseInt(i.style.width)/n.width,o=parseInt(i.style.height)/n.height,s=window.innerHeight*(r/o),a=s*e;n.style.width=a+"px",n.style.height=s+"px"}}]),e}(f.Scene));e.a=p}},[471]);